{"version":3,"sources":["../js/RoomsManager.js"],"names":["Room","require","module","room","Math","playersCount","index"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAlB,WAAkB,CAAlB;;AAEAC,MAAM,CAANA,OAAAA,GAAAA,aAAAA,YAAAA;AACI,WAAA,YAAA,CAAA,EAAA,EAAe;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,CAAA;;AACX,SAAA,KAAA,GAAA,EAAA;AACA,SAAA,EAAA,GAAA,EAAA;AACH;;AAJLA,EAAAA,YAAAA,CAAAA,YAAAA,EAAAA,CAAAA;AAAAA,IAAAA,GAAAA,EAAAA,YAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,UAAAA,CAAAA,EAAAA,EAMkB;AACV,UAAIC,IAAI,GAAG,KAAA,KAAA,CAAA,IAAA,CAAgB,UAAA,IAAA,EAAI;AAAA,eAAIA,IAAI,CAAJA,EAAAA,KAAJ,EAAA;AAA/B,OAAW,CAAX;AAEA,UAAGA,IAAI,KAAP,SAAA,EACI,OAAA,IAAA;AAEJA,MAAAA,IAAI,GAAG,IAAA,IAAA,CAAS,KAAT,EAAA,EAAPA,EAAO,CAAPA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AAEA,aAAA,IAAA;AACH;AAhBLD,GAAAA,EAAAA;AAAAA,IAAAA,GAAAA,EAAAA,SAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,OAAAA,CAAAA,EAAAA,EAkBe;AACP,aAAO,KAAA,KAAA,CAAA,IAAA,CAAgB,UAAA,IAAA,EAAI;AAAA,eAAIC,IAAI,CAAJA,EAAAA,KAAJ,EAAA;AAA3B,OAAO,CAAP;AACH;AApBLD,GAAAA,EAAAA;AAAAA,IAAAA,GAAAA,EAAAA,cAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,YAAAA,GAsBkB;AACV,aAAOE,IAAI,CAAJA,KAAAA,CAAWA,IAAI,CAAJA,MAAAA,KAAlB,QAAOA,CAAP;AACH;AAxBLF,GAAAA,EAAAA;AAAAA,IAAAA,GAAAA,EAAAA,kBAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,gBAAAA,GAyBsB;AAAA,UAAA,yBAAA,GAAA,IAAA;AAAA,UAAA,iBAAA,GAAA,KAAA;AAAA,UAAA,cAAA,GAAA,SAAA;;AAAA,UAAA;AACd,aAAA,IAAA,SAAA,GAAgB,KAAhB,KAAgB,CAAhB,MAAA,CAAA,QAAgB,GAAhB,EAAA,KAAA,EAAA,EAAA,yBAAA,GAAA,CAAA,KAAA,GAAA,SAAA,CAAA,IAAA,EAAA,EAAA,IAAA,CAAA,EAAA,yBAAA,GAAA,IAAA,EAA2B;AAAA,cAAnBC,IAAmB,GAAA,KAAA,CAAA,KAAA;AACvB,cAAIE,YAAY,GAAGF,IAAI,CAAvB,YAAA;AAEA,cAAGE,YAAY,KAAf,CAAA,EACI,OAAA,IAAA;AACP;AANa,OAAA,CAAA,OAAA,GAAA,EAAA;AAAA,QAAA,iBAAA,GAAA,IAAA;AAAA,QAAA,cAAA,GAAA,GAAA;AAAA,OAAA,SAAA;AAAA,YAAA;AAAA,cAAA,CAAA,yBAAA,IAAA,SAAA,CAAA,QAAA,CAAA,IAAA,IAAA,EAAA;AAAA,YAAA,SAAA,CAAA,QAAA,CAAA;AAAA;AAAA,SAAA,SAAA;AAAA,cAAA,iBAAA,EAAA;AAAA,kBAAA,cAAA;AAAA;AAAA;AAAA;;AASd,aAAO,KAAA,UAAA,CAAgB,KAAvB,YAAuB,EAAhB,CAAP;AACH;AAnCLH,GAAAA,EAAAA;AAAAA,IAAAA,GAAAA,EAAAA,iBAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,eAAAA,CAAAA,EAAAA,EAqCuB;AACf,UAAIC,IAAI,GAAG,KAAA,OAAA,CAAX,EAAW,CAAX;AAEA,UAAGA,IAAI,KAAP,SAAA,EACIA,IAAI,GAAG,KAAA,UAAA,CAAPA,EAAO,CAAPA;AAEJ,aAAA,IAAA;AACH;AA5CLD,GAAAA,EAAAA;AAAAA,IAAAA,GAAAA,EAAAA,WAAAA;AAAAA,IAAAA,KAAAA,EAAAA,SAAAA,SAAAA,CAAAA,EAAAA,EA8CiB;AACT,UAAIC,IAAI,GAAG,KAAA,OAAA,CAAX,EAAW,CAAX;AACA,UAAGA,IAAI,KAAP,SAAA,EACI;AAEJ,UAAIG,KAAK,GAAG,KAAA,KAAA,CAAA,OAAA,CAAZ,IAAY,CAAZ;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AAEAH,MAAAA,IAAI,CAAJA,KAAAA;AACH;AAvDLD,GAAAA,CAAAA,CAAAA;;AAAAA,SAAAA,YAAAA;AAAAA,CAAAA,EAAAA","sourcesContent":["let Room = require('./Room.js');\r\n\r\nmodule.exports = class RoomsManager {\r\n    constructor(io){\r\n        this.rooms = [];\r\n        this.io = io;\r\n    }\r\n    \r\n    createRoom(id){\r\n        let room = this.rooms.find(room => room.id === id);\r\n        \r\n        if(room !== undefined)\r\n            return room;\r\n        \r\n        room = new Room(this.io, id);\r\n        this.rooms.push(room);\r\n        \r\n        return room;\r\n    }\r\n    \r\n    getRoom(id){\r\n        return this.rooms.find(room => room.id === id);\r\n    }\r\n\r\n    randomRoomId(){\r\n        return Math.round(Math.random() * 10000000);\r\n    }\r\n    getAvailableRoom(){\r\n        for(let room of this.rooms){\r\n            let playersCount = room.playersCount;\r\n            \r\n            if(playersCount === 1)\r\n                return room;\r\n        }\r\n        \r\n        \r\n        return this.createRoom(this.randomRoomId());\r\n    }\r\n    \r\n    getOrCreateRoom(id){\r\n        let room = this.getRoom(id);\r\n\r\n        if(room === undefined)\r\n            room = this.createRoom(id);\r\n        \r\n        return room;\r\n    }\r\n\r\n    closeRoom(id){\r\n        let room = this.getRoom(id);\r\n        if(room === undefined)\r\n            return;\r\n        \r\n        let index = this.rooms.indexOf(room);\r\n        this.rooms.splice(index, 1);\r\n        \r\n        room.close();\r\n    }\r\n};"],"file":"RoomsManager.js"}